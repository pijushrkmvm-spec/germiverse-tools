name: Keep App Alive

on:
  schedule:
    # ⏱️ UPDATED: Run every 2 hours (Aggressive Mode)
    # This ensures the app never sits idle long enough to sleep.
    - cron: "0 */2 * * *"
  workflow_dispatch: # Allows manual run

jobs:
  wake_up:
    runs-on: ubuntu-latest
    steps:
      - name: Poke Streamlit App
        run: |
          # 1. Ping the Health Check (GET request, Follow Redirects)
          # We removed "-I" so it actually downloads the response (simulating a view)
          echo "Poking Health Check..."
          curl -L -A "Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/91.0" \
          https://germiverse.streamlit.app/_stcore/health || true
          
          # 2. Wait 10 seconds to let the server spin up
          echo "Waiting for spin up..."
          sleep 10
          
          # 3. Ping the Main URL (GET request)
          echo "Poking Main URL..."
          # > /dev/null hides the massive HTML output from your logs
          curl -L -A "Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/91.0" \
          https://germiverse.streamlit.app/ > /dev/null || true
          
          echo "✅ Wake up call completed."
